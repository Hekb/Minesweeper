{"ast":null,"code":"var _jsxFileName = \"/Users/Matt/Desktop/Minesweeper/minesweeper/src/components/App/index.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport \"./App.scss\";\nimport Number from \"../Number\";\nimport { generateCells, openAdjEmptyCells } from \"../../utils\";\nimport Button from '../Button';\nimport { face, cellState, cellValue } from \"../../types\";\nimport { MAX_ROWS, MAX_COLS } from '../../constants';\nimport Status from \"../Status\";\nimport Difficulty from '../Difficulty';\n\nconst App = () => {\n  const [cells, setCells] = useState(generateCells());\n  const [Face, setFace] = useState(face.happy);\n  const [time, setTime] = useState(0);\n  const [gameStarted, setLive] = useState(false);\n  const [mineCounter, setMineCounter] = useState(10);\n  const [lost, setLost] = useState(false);\n  const [won, setWon] = useState(false);\n  const [status, setStatus] = useState(\"Click on Anywhere to Start\");\n  const [color, setColor] = useState(\"blue\");\n  useEffect(() => {\n    if (lost) return;\n\n    const mosuedown = () => {\n      setFace(face.lost);\n    };\n\n    const mouseup = () => {\n      setFace(face.happy);\n    };\n\n    const optionChange = () => {};\n\n    window.addEventListener('mousedown', mosuedown);\n    window.addEventListener('mouseup', mouseup);\n    window.addEventListener('change', mouseup);\n    return () => {\n      window.removeEventListener('mousedown', mosuedown);\n      window.removeEventListener('mouseup', mosuedown);\n    };\n  }, []);\n  useEffect(() => {\n    if (gameStarted && time < 999) {\n      const timer = setInterval(() => {\n        setTime(time + 1);\n      }, 1000);\n      return () => {\n        clearInterval(timer);\n      };\n    }\n  }, [gameStarted, time]);\n  useEffect(() => {\n    if (lost) {\n      setFace(face.lost);\n      setLive(false);\n      setLost(true);\n      setStatus(\"You Lost :(\");\n      setColor(\"red\");\n    }\n  }, [lost]);\n\n  const handleCellClick = (row1, col1) => () => {\n    if (lost) return;\n\n    if (!gameStarted) {\n      setLive(true);\n    }\n\n    setStatus(\"Game Started, Good Luck\");\n    const currentCell = cells[row1][col1];\n    let newCells = cells.slice();\n    if (currentCell.state === cellState.flagged) return; //clicked on a mine\n\n    if (currentCell.value === cellValue.bomb) {\n      setLost(true);\n      setFace(face.lost);\n      newCells[row1][col1].red = true;\n      newCells = revealMines();\n      setCells(newCells);\n    } else if (currentCell.value === cellValue.empty || currentCell.state == cellState.visible) {\n      //clicked on empty cell\n      newCells = openAdjEmptyCells(newCells, row1, col1);\n      setCells(newCells);\n    } else {\n      //clicked on a number\n      newCells[row1][col1].state = cellState.visible;\n    } //check if game won\n\n\n    let safeMineOpen = false;\n\n    for (let row = 0; row < MAX_ROWS; row++) {\n      for (let col = 0; col < MAX_COLS; col++) {\n        const currentCell = newCells[row][col];\n\n        if (currentCell.value != cellValue.bomb && currentCell.state === cellState.open) {\n          safeMineOpen = true;\n          break;\n        }\n      }\n    }\n\n    if (!safeMineOpen) {\n      //we won the game\n      setWon(true);\n      newCells = newCells.map(row => row.map(cell => {\n        if (cell.value == cellValue.bomb) {\n          return { ...cell,\n            state: cellState.flagged\n          };\n        }\n\n        return cell;\n      }));\n    }\n\n    setCells(newCells);\n  };\n\n  useEffect(() => {\n    if (won) {\n      setLive(false);\n      setWon(true);\n      setFace(face.won);\n      setStatus(\"Yay, you won!\");\n      setColor(\"green\");\n    }\n  }, [won]);\n\n  const faceClicked = () => {\n    setLive(false);\n    setLost(false);\n    setTime(0);\n    setCells(generateCells());\n    setWon(false);\n    setMineCounter(10);\n    setStatus(\"Click on Anywhere to Start\");\n    setColor(\"blue\");\n  };\n\n  const handleRightClick = (row1, col1) => e => {\n    e.preventDefault();\n    const cell = cells[row1][col1];\n    const currentCells = cells.slice();\n    if (!gameStarted) return;\n\n    if (cell.state === cellState.visible) {\n      return;\n    } else if (cell.state === cellState.open) {\n      currentCells[row1][col1].state = cellState.flagged;\n      setCells(currentCells);\n      setMineCounter(mineCounter - 1);\n    } else if (cell.state === cellState.flagged) {\n      currentCells[row1][col1].state = cellState.open;\n      setCells(currentCells);\n      setMineCounter(mineCounter + 1);\n    }\n  };\n\n  const renderCells = () => {\n    return cells.map((i, rowIndex) => i.map((cell, colIndex) => /*#__PURE__*/React.createElement(Button, {\n      key: `${rowIndex}-${colIndex}`,\n      row: rowIndex,\n      col: colIndex,\n      state: cell.state,\n      value: cell.value,\n      onClick: handleCellClick,\n      rightClicked: handleRightClick,\n      red: cell.red,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    })));\n  };\n\n  const revealMines = () => {\n    let currentcells = cells.slice();\n    currentcells = currentcells.map(row => row.map(cell => {\n      if (cell.value == cellValue.bomb) {\n        return { ...cell,\n          state: cellState.visible\n        };\n      }\n\n      return cell;\n    }));\n    return currentcells;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Status, {\n    message: status,\n    color: color,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Difficulty, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Number, {\n    value: mineCounter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"face\",\n    onClick: faceClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-label\": \"face\",\n    role: \"img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 25\n    }\n  }, Face)), /*#__PURE__*/React.createElement(Number, {\n    value: time,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, renderCells())));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/Matt/Desktop/Minesweeper/minesweeper/src/components/App/index.tsx"],"names":["React","useState","useEffect","Number","generateCells","openAdjEmptyCells","Button","face","cellState","cellValue","MAX_ROWS","MAX_COLS","Status","Difficulty","App","cells","setCells","Face","setFace","happy","time","setTime","gameStarted","setLive","mineCounter","setMineCounter","lost","setLost","won","setWon","status","setStatus","color","setColor","mosuedown","mouseup","optionChange","window","addEventListener","removeEventListener","timer","setInterval","clearInterval","handleCellClick","row1","col1","currentCell","newCells","slice","state","flagged","value","bomb","red","revealMines","empty","visible","safeMineOpen","row","col","open","map","cell","faceClicked","handleRightClick","e","preventDefault","currentCells","renderCells","i","rowIndex","colIndex","currentcells"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, MouseEvent} from 'react';\nimport \"./App.scss\";\nimport Number from \"../Number\";\nimport {generateCells, openAdjEmptyCells} from \"../../utils\";\nimport Button from '../Button';\nimport {cell, face, cellState, cellValue} from \"../../types\";\nimport { MAX_ROWS, MAX_COLS } from '../../constants';\nimport Status from \"../Status\";\nimport Difficulty from '../Difficulty';\n\nconst App: React.FC = () =>{\n    const[cells, setCells] = useState<cell[][]>(generateCells());\n    const[Face, setFace] = useState<face>(face.happy);\n    const[time, setTime] = useState<number>(0);\n    const[gameStarted, setLive] = useState<boolean>(false);\n    const[mineCounter, setMineCounter] = useState<number>(10);\n    const[lost, setLost] = useState<boolean>(false);\n    const[won, setWon] = useState<boolean>(false);\n    const[status, setStatus] = useState<String>(\"Click on Anywhere to Start\");\n    const[color, setColor] = useState<String>(\"blue\");\n    useEffect(() =>{\n        \n        if(lost) return;\n\n        const mosuedown = () =>{\n            setFace(face.lost);\n        }\n        const mouseup = () => {\n            setFace(face.happy)\n        }\n        const optionChange = () =>{\n\n        }\n        window.addEventListener('mousedown', mosuedown)\n        window.addEventListener('mouseup', mouseup)\n        window.addEventListener('change', mouseup)\n\n        return () => {\n            window.removeEventListener('mousedown', mosuedown)\n            window.removeEventListener('mouseup', mosuedown)\n        }\n    }, [])\n    useEffect(() => {\n        if(gameStarted && time < 999){\n            const timer = setInterval(() =>{\n                setTime(time + 1);\n            }, 1000)\n            return () => {\n                clearInterval(timer);\n            }    \n        }\n    },[gameStarted, time ]);\n    useEffect(() =>{\n        if(lost){\n            setFace(face.lost);\n            setLive(false);            \n            setLost(true)\n            setStatus(\"You Lost :(\")\n            setColor(\"red\")\n        }\n\n    },[lost])\n\n    const handleCellClick = (row1: number, col1: number) => (): void => {\n        if(lost) return;\n\n        if(!gameStarted){\n            setLive(true);\n        }\n        setStatus(\"Game Started, Good Luck\");\n        \n        const currentCell = cells[row1][col1];\n        let newCells = cells.slice();\n        if(currentCell.state === cellState.flagged) return;\n        //clicked on a mine\n        if(currentCell.value === cellValue.bomb){\n            setLost(true);\n            setFace(face.lost);\n            newCells[row1][col1].red = true\n            newCells = revealMines();\n            setCells(newCells);\n        }else if(currentCell.value === cellValue.empty || currentCell.state == cellState.visible){//clicked on empty cell\n            newCells = openAdjEmptyCells(newCells, row1,col1)\n            setCells(newCells)\n        }else{ //clicked on a number\n            newCells[row1][col1].state = cellState.visible\n            \n        }\n        //check if game won\n        let safeMineOpen = false;\n        for(let row = 0; row < MAX_ROWS; row++){\n            for(let col = 0; col < MAX_COLS; col++){\n                const currentCell = newCells[row][col];\n                if(currentCell.value != cellValue.bomb && currentCell.state === cellState.open){\n                    safeMineOpen = true;\n                    break;\n                }\n            }\n        }\n        if(!safeMineOpen){\n            //we won the game\n            setWon(true)\n            newCells = newCells.map(row => row.map(cell => {\n                if(cell.value == cellValue.bomb){\n                    return {\n                        ...cell,\n                        state: cellState.flagged\n                    }\n                }\n                return cell;\n            }))\n        }\n        setCells(newCells)\n    } \n    useEffect(() => {\n        if(won){\n            setLive(false)\n            setWon(true)\n            setFace(face.won)\n            setStatus(\"Yay, you won!\")\n            setColor(\"green\")\n        }\n\n    },[won])\n    const faceClicked = () => {\n        setLive(false)\n        setLost(false)\n        setTime(0)\n        setCells(generateCells())\n        setWon(false)\n        setMineCounter(10)\n        setStatus(\"Click on Anywhere to Start\")\n        setColor(\"blue\")\n    }\n    const handleRightClick = (row1: number, col1: number) => (e: React.MouseEvent<HTMLDivElement, MouseEvent>): void =>{\n        e.preventDefault();\n        const cell = cells[row1][col1]\n        const currentCells = cells.slice();\n        if(!gameStarted) return;\n\n        if(cell.state === cellState.visible){\n            return;\n        }else if(cell.state === cellState.open){\n            currentCells[row1][col1].state = cellState.flagged\n            setCells(currentCells)\n            setMineCounter(mineCounter - 1);\n        }else if(cell.state === cellState.flagged){\n            \n            currentCells[row1][col1].state = cellState.open\n            setCells(currentCells)\n            setMineCounter(mineCounter + 1);\n        }\n    }\n    const renderCells = ():React.ReactNode => {\n        return cells.map((i, rowIndex) => i.map((cell, colIndex) => \n        <Button key={`${rowIndex}-${colIndex}`} \n            row={rowIndex} \n            col={colIndex} \n            state={cell.state} \n            value={cell.value}\n            onClick={handleCellClick}\n            rightClicked={handleRightClick}\n            red={cell.red}\n            />)\n        );\n    };\n    \n    const revealMines = (): cell[][] =>{\n        let currentcells = cells.slice();\n        currentcells = currentcells.map(row => row.map(cell =>{\n            if(cell.value == cellValue.bomb){\n                return {\n                    ...cell,\n                    state: cellState.visible\n                }\n            }\n            return cell;\n        }))\n        return currentcells;\n    }\n    return(\n        <div className=\"wrapper\">\n            <div className=\"status\">\n                <Status message={status} color={color}></Status>\n            </div>\n            <div>\n                <Difficulty></Difficulty>\n            </div>\n            <div className=\"App\">\n                <div className=\"header\">\n                    <Number value={mineCounter}>\n                        \n                    </Number>\n                    <div className=\"face\" onClick={faceClicked}> \n                        <span aria-label=\"face\" role=\"img\">{Face}</span> \n                    </div>\n                    <Number value={time}>\n\n                    </Number>\n                </div>\n                <div className=\"body\">\n                    {renderCells()}\n                </div>\n            </div>\n            \n        </div>\n        \n    )\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}